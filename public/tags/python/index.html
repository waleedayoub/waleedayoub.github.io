<!DOCTYPE html>
<html lang=""><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
    <title>Python | Waleed Ayoub</title>
    <meta name="description" content="Python">
    <meta property="og:site_name" content="Python" />
    <meta property="og:title" content="Waleed Ayoub" />
    <meta property="og:description" content="" />
    <meta property="og:image" content="http://localhost:1313/images/headshot-waleed.png" />
    <meta name="keywords" content="" />
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css"
        integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js"
        integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous">
        </script>

    
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js"
        integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
        onload="renderMathInElement(document.body);">
        </script>
    
    <meta name="keywords" content="waleed, data, python">
    <link rel="icon" type="image/svg" href='http://localhost:1313/images/logo.png' />
    <meta name="author" content='waleed'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.145.0">
    
    <link rel="stylesheet" href="http://localhost:1313/sass/main.min.a669fc379ca0ba4d389af69be2682407e7bca16d368f2e7ad5b83c0cd80029b3.css" type="text/css" media="screen">

    <link rel="stylesheet" href="http://localhost:1313/css/custom-style.css">

    

    
    
    <link rel="alternate" type="application/rss+xml" href="http://localhost:1313/tags/python/index.xml" title="Waleed Ayoub" />
    
</head><body>
      <div class="line" id="scrollIndicator"></div>
      <div class="main"><div class="title">
  <div class="name">
    <h2><a href="http://localhost:1313/"
	   style="text-decoration: none; color: inherit;">Waleed Ayoub</a></h2>
  </div>
  <div class="color-scheme">
    <input type="checkbox" class="checkbox" id="chk" />
    <label class="label" for="chk">
						<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"></path></svg>
						<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 160c-52.9 0-96 43.1-96
										96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"></path></svg>
      <div class="ball"></div>
    </label>
  </div>
</div>
<script>
  const themeSetter = (theme) => {
      document.body.classList.toggle('dark')
      localStorage.setItem('theme', theme)
      blockSwitcher()
  }

  const blockSwitcher = () => [...document.getElementsByTagName("BLOCKQUOTE")]
	.forEach(b => b.classList.toggle('dark'))

  const styleSwapper = () => {
      document.body.classList.add('back-transition')
      if (localStorage.getItem('theme') === 'dark') themeSetter('light')
      else if (localStorage.getItem('theme') === 'light') themeSetter('dark')
  }

  if (localStorage.getItem('theme') === 'dark'){
      themeSetter('dark')
      document.addEventListener("DOMContentLoaded", blockSwitcher)
  }
 else localStorage.setItem('theme', 'light')

  document.getElementById('chk').addEventListener('change',styleSwapper);

  window.addEventListener("scroll", () => {
      let height = document.documentElement.scrollHeight
          - document.documentElement.clientHeight;
      if(height >= 500){
	  let winScroll = document.body.scrollTop
              || document.documentElement.scrollTop;
	  let scrolled = (winScroll / height) * 100;
	  document.getElementById("scrollIndicator").style.width = scrolled + "%";
      }
  });
</script>

<br>
	<div style="display:flex;align-items:center;">
		<a class="go-back" href="http://localhost:1313/"><svg aria-hidden="true" focusable="false" data-prefix="far" class="back-icon" data-icon="caret-square-left" height="25px" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M272 157.1v197.8c0 10.7-13 16.1-20.5 8.5l-98.3-98.9c-4.7-4.7-4.7-12.2 0-16.9l98.3-98.9c7.5-7.7 20.5-2.3 20.5 8.4zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5
						21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-48 346V86c0-3.3-2.7-6-6-6H54c-3.3 0-6 2.7-6 6v340c0 3.3 2.7 6 6
						6h340c3.3 0 6-2.7 6-6z"></path></svg> </a>
	<h2 class="post-title">Python</h2>
	</div>
        
        
          
            <div class="post-item">
              
                <well class="well">
                  <h3><a class="link" href="http://localhost:1313/post/huggingface-agents_unit1/">Huggingface Agents - Unit 1 Exploration</a>
                    
                    by <a class="link" href="">waleed</a></h3>
                  
                    <h4>March 3, 2025 | Reading Time: 8 min </h4>
                    <span class="tags">
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/huggingface'>huggingface</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/LLM'>LLM</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/agents'>agents</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/python'>python</a></h5>
                        
                    </span>
                    <p><p>I have recently started a new course focused on building agents provided by huggingface.co
Here&rsquo;s an overview of all the things that I&rsquo;ll be learning:</p>
<ul>
<li>üìñ Study AI Agents in theory, design, and practice.</li>
<li>üßë‚Äçüíª Learn to use established AI Agent libraries such as smolagents, LlamaIndex, and LangGraph.</li>
<li>üíæ Share your agents on the Hugging Face Hub and explore agents created by the community.</li>
<li>üèÜ Participate in challenges where you will evaluate your agents against other students‚Äô.</li>
<li>üéì Earn a certificate of completion by completing assignments.</li>
</ul>
<p>I thought what better way to motivate myself to keep going than to maintain some regular blog posts with concepts and frameworks I explore. Unfortunately, that didn&rsquo;t help me complete the DataTalksClub LLM Zoomcamp fully, but it did really get me pretty far. So here goes.</p></p>
                </well>
                            
            </div><br>
          
            <div class="post-item">
              
                <well class="well">
                  <h3><a class="link" href="http://localhost:1313/post/llmzoomcamp_week4-monitoring-evaluation_notes/">LLM Zoomcamp Week 4 - Monitoring and Evaluation Notes</a>
                    
                    by <a class="link" href="">waleed</a></h3>
                  
                    <h4>August 6, 2024 | Reading Time: 18 min </h4>
                    <span class="tags">
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/datatalksclub'>datatalksclub</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/LLM'>LLM</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/python'>python</a></h5>
                        
                    </span>
                    <p><h1 id="llm-zoomcamp---week-4-notes">LLM Zoomcamp - Week 4 Notes <!-- omit from toc --></h1>
<p>In this section the focus is on the following:</p>
<ul>
<li>
<p>Extending the evaluation work we did in section 3 to monitor answer quality over time</p>
</li>
<li>
<p>How to look at answer quality with user feedback and interaction</p>
</li>
<li>
<p>How to store all this data and visualize it, etc.</p>
</li>
<li>
<p>But before all that, let&rsquo;s do a quick recap of where we are.</p>
</li>
</ul>
<h2 id="table-of-contents">Table of Contents <!-- omit from toc --></h2>
<ul>
<li><a href="#recap">Recap</a></li>
<li><a href="#41-intro">4.1 Intro</a></li>
<li><a href="#42-differences-between-online-and-offline-evaluation-with-rags">4.2 Differences Between Online and Offline Evaluation (with RAGs)</a>
<ul>
<li><a href="#techniques-for-offline-evaluation">Techniques For Offline Evaluation</a></li>
</ul>
</li>
<li><a href="#43-offline-evaluation-for-our-rag-system">4.3 Offline Evaluation for our RAG System</a>
<ul>
<li><a href="#load-our-faq-documents-with-document-ids">Load our FAQ Documents with Document IDs</a></li>
<li><a href="#load-ground-truth-dataset-we-create-using-llms">Load ground truth dataset we create using LLMs</a></li>
<li><a href="#cosine-similarity-metric">Cosine Similarity metric</a></li>
<li><a href="#evaluating-gpt-35-turbo-vs-gpt-4o-mini">Evaluating GPT-3.5-turbo vs GPT-4o-mini</a></li>
</ul>
</li>
<li><a href="#44-offline-rag-evaluation---cosine-similarity">4.4 Offline RAG Evaluation - Cosine Similarity</a></li>
<li><a href="#45-offline-rag-evaluation---llm-as-a-judge">4.5 Offline RAG Evaluation - LLM as a Judge</a></li>
<li><a href="#46-capturing-user-feedback">4.6 Capturing User Feedback</a></li>
<li><a href="#47-monitoring-the-system">4.7 Monitoring the System</a></li>
</ul>
<h2 id="recap">Recap</h2>
<p>A quick recap of what the first three sections have been about:</p></p>
                </well>
                            
            </div><br>
          
            <div class="post-item">
              
                <well class="well">
                  <h3><a class="link" href="http://localhost:1313/post/llmzoomcamp_week3-vector-search_notes/">LLM Zoomcamp Week 3 - Vector Search with Elasticsearch Notes</a>
                    
                    by <a class="link" href="">waleed</a></h3>
                  
                    <h4>July 19, 2024 | Reading Time: 55 min </h4>
                    <span class="tags">
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/datatalksclub'>datatalksclub</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/LLM'>LLM</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/python'>python</a></h5>
                        
                    </span>
                    <p><h1 id="llm-zoomcamp---week-3-notes">LLM Zoomcamp - Week 3 Notes <!-- omit from toc --></h1>
<p>In this section the focus is on the following:</p>
<ul>
<li>Applying Vector Databases as an alternative to Elasticsearch in the previous two models.
<ul>
<li>Important to note that Elasticsearch has the ability to operate as a Vector DB as an alternative to Lucene and will be covered as well</li>
</ul>
</li>
<li>Vector embeddings and their role in building RAG applications</li>
<li>Evaluation methods for search / query retrieval performance</li>
</ul>
<h2 id="table-of-contents">Table of Contents <!-- omit from toc --></h2>
<ul>
<li><a href="#31-introduction-to-vector-search">3.1 Introduction to Vector Search</a></li>
<li><a href="#32-how-to-do-vectorized-search-with-elasticsearch">3.2 How to do Vectorized Search with Elasticsearch</a>
<ul>
<li><a href="#321-lets-start-with-semantic-search">3.2.1 Let&rsquo;s start with Semantic Search</a>
<ul>
<li><a href="#step-1---load-our-documents">Step 1 - Load our documents</a></li>
<li><a href="#step-2---create-embeddings-using-pre-trained-models">Step 2 - Create embeddings using pre-trained models</a></li>
<li><a href="#step-3---set-up-elasticsearch-connection">Step 3 - Set up Elasticsearch connection</a></li>
<li><a href="#step-4-create-elasticsearch-mappings-and-index">Step 4 Create Elasticsearch mappings and index</a></li>
<li><a href="#step-5-add-documents-to-the-index">Step 5 Add documents to the index</a></li>
<li><a href="#step-6-create-the-user-query">Step 6 Create the user query</a></li>
<li><a href="#step-7-perform-a-semantic-search-using-elasticsearch-vectordb">Step 7 Perform a semantic search using Elasticsearch VectorDB</a></li>
</ul>
</li>
<li><a href="#322-now-lets-try-advanced-semantic-search">3.2.2 Now let&rsquo;s try Advanced Semantic Search</a></li>
</ul>
</li>
<li><a href="#33-evaluation">3.3 Evaluation</a>
<ul>
<li><a href="#331-evaluation-metrics-for-retrieval">3.3.1 Evaluation metrics for retrieval</a></li>
<li><a href="#332-ground-truth-generation-for-retrieval-evaluation">3.3.2 Ground truth generation for retrieval evaluation</a></li>
<li><a href="#333-evaluation-of-text-retrieval-techniques-for-rag">3.3.3 Evaluation of text retrieval techniques for RAG</a></li>
<li><a href="#334-evaluation-vector-retrieval">3.3.4 Evaluation vector retrieval</a></li>
</ul>
</li>
</ul>
<h2 id="31-introduction-to-vector-search">3.1 Introduction to Vector Search</h2>
<ul>
<li>Vector search has been around for a while and is getting popular again largely because LLMs lack long-term memory and have limited context windows
<ul>
<li>Vector DBs are an economical and effective way to store data for use with LLMs</li>
</ul>
</li>
<li>Elastic.co does a good job of explaining what vector embeddings are <a href="https://www.elastic.co/what-is/vector-embedding">here</a>
<ul>
<li>Here&rsquo;s their definition:</li>
<li><code>Vector embeddings are a way to convert words and sentences and other data into numbers that capture their meaning and relationships. They represent different data types as points in a multidimensional space, where similar data points are clustered closer together. These numerical representations help machines understand and process this data more effectively.</code></li>
</ul>
</li>
<li>Vector databases are databases that index and store vector embeddings
<ul>
<li>Which means you can easily store them, reference them, compare different vectors semantically (using various distance measures, etc.)</li>
</ul>
</li>
<li>Here&rsquo;s what it would look like when put together with an LLM:</li>
</ul>
<div style="max-width: 100%; overflow: hidden;">
    <img src="/images/sbert.png" alt="List of SBERT original models" style="width: 100%; height: auto;">
</div>
<h2 id="32-how-to-do-vectorized-search-with-elasticsearch">3.2 How to do Vectorized Search with Elasticsearch</h2>
<ul>
<li>Let&rsquo;s start with the architecture of the Semantic Search system we&rsquo;re going to build:</li>
</ul>
<div class="mermaid-wrapper">
    <pre class="mermaid">graph LR
    documents.json -->|load| documents
    subgraph Process
        documents --> embeddings
        embeddings --> index
        index -->|store| Elasticsearch[(Elasticsearch vector DB)]
    end
    Elasticsearch -->|retrieve| Semantic_search_results(Semantic search results)
    new_search_query(New search query) -.-> embeddings
    embeddings  -.-> Elasticsearch
	
	style new_search_query stroke:blue,stroke-width:2px;
    </pre>
</div>
<ul>
<li>
<p>The way this system works is as follows:</p></p>
                </well>
                            
            </div><br>
          
            <div class="post-item">
              
                <well class="well">
                  <h3><a class="link" href="http://localhost:1313/post/llmzoomcamp_week2-open-source_notes/">LLM Zoomcamp Week 2 - Open Source LLMs Notes</a>
                    
                    by <a class="link" href="">waleed</a></h3>
                  
                    <h4>July 10, 2024 | Reading Time: 23 min </h4>
                    <span class="tags">
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/datatalksclub'>datatalksclub</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/LLM'>LLM</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/python'>python</a></h5>
                        
                    </span>
                    <p><h1 id="llm-zoomcamp---week-2-notes">LLM Zoomcamp - Week 2 Notes</h1>
<p>In the second week, we set up cloud-based GPU options like SaturnCloud and explore open source alternatives to OpenAI platforms and  models like:
Platforms:</p>
<ul>
<li>HuggingFace</li>
<li>Ollama</li>
<li>SaturnCloud</li>
</ul>
<p>Models:</p>
<ul>
<li>Google FLAN T5</li>
<li>Phi 3 Mini</li>
<li>Mistral 7-B</li>
</ul>
<p>And finally, we put the RAG we built in week 1 into a Streamlit UI</p>
<p>A few important call outs for this section:</p>
<ul>
<li>For the most part, I will be taking these notes in a Saturn Cloud notebook</li>
<li>Which means that before starting each note section, I will be restarting the kernel to free up RAM from the GPU I&rsquo;m using</li>
<li>So if I ever decide to revisit these notes in the future, I won&rsquo;t be able to just load this notebook and run things as is</li>
</ul>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#22-using-saturncloud-for-gpu-notebooks">2.2 Using SaturnCloud for GPU Notebooks</a></li>
<li><a href="#23-huggingface-and-google-flan-t5">2.3 HuggingFace and Google FLAN T5</a></li>
<li><a href="#24-phi-3-mini">2.4 Phi 3 Mini</a></li>
<li><a href="#25-mistral-7b-and-huggingface-hub-authentication">2.5 Mistral-7B and HuggingFace Hub Authentication</a></li>
<li><a href="#26-exploring-open-source-llms">2.6 Exploring Open Source LLMs</a></li>
<li><a href="#27-running-llms-locally-without-a-gpu-with-ollama">2.7 Running LLMs Locally without a GPU with Ollama</a></li>
<li><a href="#28-ollama--elastic-in-docker-compose">2.8 Ollama + Elastic in Docker Compose</a>
<ul>
<li><a href="#docker-compose-setup">Docker Compose Setup</a></li>
<li><a href="#setting-up-elasticsearch-and-ollama">Setting Up Elasticsearch and Ollama</a></li>
<li><a href="#building-the-rag-system">Building the RAG System</a></li>
</ul>
</li>
<li><a href="#29-creating-a-streamlit-ui">2.9 Creating a Streamlit UI</a></li>
<li><a href="#bonus-ollama--openwebui--elastic-in-docker-with-gpu">Bonus Ollama + OpenWebUI + Elastic in Docker with GPU</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> requests
</span></span></code></pre></div><h2 id="22-using-saturncloud-for-gpu-notebooks">2.2 Using SaturnCloud for GPU Notebooks</h2>
<ul>
<li>The main thing not covered is how to give Saturn Cloud access to your GitHub repositories
<ul>
<li>This is fairly straightforward:
<ol>
<li>In Saturn Cloud, go to &ldquo;Manage <username>&rdquo; and create an SSH key pair</li>
<li>Copy the public key Saturn Cloud generates and go to Github.com
i. In Github.com, go to Settings -&gt; SSH and GPG keys and click on <code>New SSH Key</code>
ii. Paste in the public key you copied from Saturn Cloud</li>
<li>Now go back to Saturn Cloud and click on <code>Git Repositories</code>
i. Click on <code>New</code>
ii. Add the url for the Github repository you want Saturn Cloud to have access to</li>
</ol>
</li>
</ul>
</li>
<li>When creating a new Python VM resource, make sure to install additional libs: <code>pip install -U transformers accelerate bitsandbytes</code></li>
<li>The rest of it is quite straightforward</li>
<li>A few things I did with my setup of the notebook resource that just helps with development:
<ol>
<li>I enabled SSH access so that I can ideally connect to this notebook resource in VS Code (and thus take advantange of many things including Github Copilot)</li>
<li>I gave the VM an easy to remember name: <a href="https://llm-zoomcamp-waleed.community.saturnenterprise.io">https://llm-zoomcamp-waleed.community.saturnenterprise.io</a></li>
<li>I created an access token on huggingface.co and added it as an environment variable on Saturn Cloud (more on that in section 2.5)</li>
</ol>
</li>
</ul>
<h2 id="23-huggingface-and-google-flan-t5">2.3 HuggingFace and Google FLAN T5</h2>
<ul>
<li>In this lesson, we start working with open source models available on <a href="huggingface.co">HuggingFace</a>
<ul>
<li>HuggingFace is a place where people host models, not just LLMs, all kinds of ML models (which effectively boils down to hosting model weights)</li>
</ul>
</li>
<li>This is where our Saturn Cloud GPU notebook in 2.2 comes into play as we&rsquo;ll need a GPU to work with these models</li>
<li>We&rsquo;re going to be using Google FLAN T5: <a href="https://huggingface.co/google/flan-t5-xl">https://huggingface.co/google/flan-t5-xl</a></li>
</ul>
<p>Let&rsquo;s start by pulling in the minsearch engine we&rsquo;re going to use in our RAG</p></p>
                </well>
                            
            </div><br>
          
            <div class="post-item">
              
                <well class="well">
                  <h3><a class="link" href="http://localhost:1313/post/managing-dev-environments_local-vs-codespaces/">Managing Dev Environments - Local vs Codespaces</a>
                    
                    by <a class="link" href="">waleed</a></h3>
                  
                    <h4>July 4, 2024 | Reading Time: 4 min </h4>
                    <span class="tags">
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/python'>python</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/github'>github</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/codespaces'>codespaces</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/secrets'>secrets</a></h5>
                        
                    </span>
                    <p><h1 id="managing-development-environments-local-machine-vs-github-codespaces">Managing Development Environments: Local Machine vs. GitHub Codespaces</h1>
<p>Since I don&rsquo;t really do development on a regular basis, especially not for my day-to-day at work, I find that one of the most annoying parts of picking up projects is getting environments set up, making sure libraries are up-to-date if needed and managing any environment variables and secrets to 3rd party services.</p>
<p>So this post really is me capturing the patterns I&rsquo;ve used and find the most useful so I can refer to them in the future (instead of fumbling through half-written notes in Obsidian).</p></p>
                </well>
                            
            </div><br>
          
            <div class="post-item">
              
                <well class="well">
                  <h3><a class="link" href="http://localhost:1313/post/llmzoomcamp_week1-intro_notes/">LLM Zoomcamp Week 1 - Intro Notes</a>
                    
                    by <a class="link" href="">waleed</a></h3>
                  
                    <h4>June 29, 2024 | Reading Time: 23 min </h4>
                    <span class="tags">
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/datatalksclub'>datatalksclub</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/LLM'>LLM</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/python'>python</a></h5>
                        
                    </span>
                    <p><h1 id="llm-zoomcamp---week-1-notes">LLM Zoomcamp - Week 1 Notes</h1>
<p>This is the first week of the new <a href="https://github.com/DataTalksClub/llm-zoomcamp/tree/main">LLM Zoomcamp</a> hosted by <a href="https://datatalks.club/">DataTalksClub</a>.
I&rsquo;ve found their content really helpful in the past, having completed the Data Engineering Zoomcamp a year ago and successively attempted (but never finished!) the other two zoomcamps they offer.</p>
<p>In order to give me the best chance of completing this one, I&rsquo;ve decided to publish my notes on my blog. Hope that helps me see this one through!</p></p>
                </well>
                            
            </div><br>
          
            <div class="post-item">
              
                <well class="well">
                  <h3><a class="link" href="http://localhost:1313/post/learning-to-use-dlthub/">Learning to Use Dlthub with Toronto Bicycle Data</a>
                    
                    by <a class="link" href="">waleed</a></h3>
                  
                    <h4>February 12, 2024 | Reading Time: 1 min </h4>
                    <span class="tags">
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/datatalksclub'>datatalksclub</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/dlthub'>dlthub</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/python'>python</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/sql'>sql</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/torontoopendata'>torontoopendata</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/data%20engineering'>data engineering</a></h5>
                        
                    </span>
                    <p><h2 id="outline">Outline</h2>
<h3 id="quick-intro-to-what-is-dlthub">Quick intro to what is dlthub</h3>
<ul>
<li>Start with the notebook from the data eng zoomcamp as an intro</li>
<li>Work through it and take notes as you&rsquo;re going through each section</li>
</ul>
<h3 id="using-toronto-bicycle-data-live-stream-json-using-dictionaries-and-lists">Using toronto bicycle data live stream json using dictionaries and lists</h3>
<h3 id="doing-the-same-using-dlthub">Doing the same using dlthub</h3></p>
                </well>
                            
            </div><br>
          
            <div class="post-item">
              
                <well class="well">
                  <h3><a class="link" href="http://localhost:1313/post/toronto-bicycle-data/">Prefect.io POC - Building ETL Pipeline for Toronto Bicycle Data</a>
                    
                    by <a class="link" href="">waleed</a></h3>
                  
                    <h4>January 3, 2024 | Reading Time: 4 min </h4>
                    <span class="tags">
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/datatalksclub'>datatalksclub</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/prefect'>prefect</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/python'>python</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/sql'>sql</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/terraform'>terraform</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/gcp'>gcp</a></h5>
                        
                        <h5><a class="tag" href='http://localhost:1313/tags/bigquery'>bigquery</a></h5>
                        
                    </span>
                    <p><h1 id="toronto-bicycle-data-engineering">Toronto Bicycle Data Engineering</h1>
<ul>
<li>You can find all the code for this project here: <a href="https://github.com/waleedayoub/toronto-bicycle-data">https://github.com/waleedayoub/toronto-bicycle-data</a></li>
<li>This was a project I explored as part of the <a href="https://github.com/DataTalksClub/data-engineering-zoomcamp/blob/main/week_7_project/README.md">final project</a> of the datatalks club data engineering zoomcamp</li>
</ul>
<h2 id="project-description">Project Description</h2>
<ul>
<li>The goal of this project is to examine historical bike share ridership going as far back as 2016 in the city of Toronto, Ontario.</li>
<li>The city of Toronto has an open data sharing mandate, and all bike share data can be found here: <a href="https://open.toronto.ca/dataset/bike-share-toronto/">https://open.toronto.ca/dataset/bike-share-toronto/</a></li>
<li>Unfortunately, the data is not consistently named or labeled across years (2014-2022, inclusively), so there is a need to perform quite a bit of processing to handle it.
<ul>
<li>For example, in some years, data is stored in tabs in XLSX files, whereas in other years, they are CSVs broken down by quarters, or in other cases, by months, in CSV files</li>
</ul>
</li>
<li>Given that this analysis focuses on historical ridership, a batch processing pipeline is sufficient, and can be scheduled to run monthly or quarterly.</li>
<li>It is unclear how often the data refreshes, but the following program handles edge cases and checks whether data has been updated before triggering pipelines</li>
</ul>
<h2 id="architecture">Architecture</h2>
<ul>
<li>The architecture for this project is kept fairly simple:</li>
</ul>
<div style="max-width: 100%; overflow: hidden;">
    <img src="/images/bikedataarch.png" alt="Data arch for toronto bicycle data" style="width: 100%; height: auto;">
</div>
<h2 id="data-sources">Data sources</h2>
<h3 id="toronto">Toronto</h3>
<ul>
<li>Ridership data: <a href="https://open.toronto.ca/dataset/bike-share-toronto-ridership-data/">https://open.toronto.ca/dataset/bike-share-toronto-ridership-data/</a></li>
<li>For batch data, here&rsquo;s an example of how to access the ridership data API:
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>base_url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://ckan0.cf.opendata.inter.prod-toronto.ca&#34;</span>
</span></span><span style="display:flex;"><span>package_url <span style="color:#f92672">=</span> base_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/api/3/action/package_show&#34;</span>
</span></span><span style="display:flex;"><span>params <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;bike-share-toronto-ridership-data&#34;</span>}
</span></span></code></pre></div></li>
<li>If you do a GET request on the package_url with params provided like this:
<code>resource = requests.get(url, params=params).json()</code>
<ul>
<li>You can then grab the url where the data is stored like this:
<code>resource[&quot;result&quot;][&quot;resources&quot;][&quot;url&quot;]</code></li>
<li>And the url will be something like this:
<a href="https://ckan0.cf.opendata.inter.prod-toronto.ca/dataset/7e876c24-177c-4605-9cef-e50dd74c617f/resource/85326868-508c-497e-b139-b698aaf27bbf/download/bikeshare-ridership-2014-2015.xlsx">https://ckan0.cf.opendata.inter.prod-toronto.ca/dataset/7e876c24-177c-4605-9cef-e50dd74c617f/resource/85326868-508c-497e-b139-b698aaf27bbf/download/bikeshare-ridership-2014-2015.xlsx</a></li>
<li>You can then do another GET request on that URL and write to a file in Python</li>
</ul>
</li>
</ul>
<h2 id="deployment-instructions">Deployment instructions</h2>
<h3 id="technologies-used">Technologies used</h3>
<ul>
<li>GCP / Cloud Storage / BigQuery / Looker</li>
<li>Terraform</li>
<li>Prefect / DBT</li>
<li>Python 3.9.16 / virtualenv</li>
</ul>
<h3 id="things-you-need-to-install--versions">Things you need to install + versions</h3>
<ul>
<li>Google cloud SDK: <a href="https://cloud.google.com/sdk/docs/install">https://cloud.google.com/sdk/docs/install</a></li>
<li>Terraform 1.4.5: <a href="https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli">https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli</a></li>
<li>Python: make sure you&rsquo;re running 3.9.16</li>
<li>Prefect 2.10.4: <a href="https://docs.prefect.io/latest/getting-started/installation/">https://docs.prefect.io/latest/getting-started/installation/</a>
<ul>
<li>It is <em>very</em> important to get the prefect version right as GCS block&rsquo;s <code>upload_from_dataframe()</code> <a href="https://prefecthq.github.io/prefect-gcp/cloud_storage/#prefect_gcp.cloud_storage.GcsBucket.upload_from_dataframe">method</a> doesn&rsquo;t work in older versions</li>
</ul>
</li>
</ul>
<h3 id="step-0">Step 0</h3>
<ul>
<li>Clone or copy this repo: <code>git clone git@github.com:waleedayoub/toronto-bicycle-data.git</code></li>
</ul>
<h3 id="step-1---initial-setup--gcp">Step 1 - Initial Setup + GCP</h3>
<ol>
<li>
<p>Create a service account in GCP and download the service account json (In the IAM &amp; Admin section of the GCP console)</p></p>
                </well>
                            
            </div><br>
          
        
<footer id="footer">
    <strong></strong>
    <div class="social">
        &nbsp;
<a href="mailto:info@waleedayoub.com" target="_blank" rel="me" title="Email" referrerpolicy="no-referrer">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
	stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
	<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
	<polyline points="22,6 12,13 2,6"></polyline>
</svg>
</a>
&nbsp;&nbsp;
<a href="https://github.com/waleedayoub" target="_blank" rel="me" title="Github" referrerpolicy="no-referrer">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
	stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
	<path
		d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
	</path>
</svg>
</a>
&nbsp;&nbsp;
<a href="https://www.linkedin.com/in/waleedayoub/" target="_blank" rel="me" title="Linkedin" referrerpolicy="no-referrer">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
	stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
	<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
	<rect x="2" y="9" width="4" height="12"></rect>
	<circle cx="4" cy="4" r="2"></circle>
</svg>
</a>
&nbsp;
    </div><strong></strong>
    <p style="color:grey;"></p>
</footer>
</div>
    </body>
</html>
